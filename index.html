
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ููุญุฉ ุงูุชุญูู ูู SA VRPlayer</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #f9f9f9; text-align: center; padding: 20px; }
        h1 { color: #005f73; }
        select, button, input[type=range] { font-size: 18px; margin: 10px; padding: 10px; }
    </style>
</head>
<body>
    <h1>๐ฎ ููุญุฉ ุงูุชุญูู ูู SA VRPlayer ๐ฅ</h1>

    <div>
        <label for="deviceIP">๐ก ุงุฎุชุฑ ุงูุฌูุงุฒ:</label>
        <select id="deviceIP"></select>
        <button onclick="scanDevices()">๐ ุจุญุซ ุนู ุงูุฃุฌูุฒุฉ</button>
    </div>

    <div>
        <label for="videoSelect">๐ ุงุฎุชุฑ ุงูููุฏูู:</label>
        <select id="videoSelect"></select>
        <button onclick="loadVideoList()">๐ ุชุญููู ูุงุฆูุฉ ุงูููุฏูู</button>
    </div>

    <div>
        <button onclick="sendCommand('play')">โถ๏ธ ุชุดุบูู</button>
        <button onclick="sendCommand('pause')">โธ ุฅููุงู ูุคูุช</button>
        <button onclick="sendCommand('stop')">โน ุฅููุงู</button>
    </div>

    <div>
        <label for="volume">๐ ูุณุชูู ุงูุตูุช:</label>
        <input type="range" id="volume" min="0" max="1" step="0.1" value="0.5"
               onchange="changeVolume(this.value)">
    </div>

    <video id="preview" controls>
        <source src="sample.mp4" type="video/mp4">
        ุงููุชุตูุญ ูุง ูุฏุนู ุนุฑุถ ุงูููุฏูู.
    </video>

    <script>
        let selectedIP = "";

        function scanDevices() {
            const base = "192.168.1.";
            const dropdown = document.getElementById("deviceIP");
            dropdown.innerHTML = "";
            for (let i = 2; i < 255; i++) {
                const ip = base + i;
                fetch(`http://${ip}:8080/ping`).then(resp => {
                    if (resp.ok) {
                        const option = document.createElement("option");
                        option.value = ip;
                        option.textContent = "ุฌูุงุฒ: " + ip;
                        dropdown.appendChild(option);
                    }
                }).catch(() => {});
            }
        }

        document.getElementById("deviceIP").addEventListener("change", function () {
            selectedIP = this.value;
        });

        function sendCommand(cmd) {
            if (!selectedIP) return alert("ูุฑุฌู ุงุฎุชูุงุฑ ุงูุฌูุงุฒ ุฃููุงู");
            fetch(`http://${selectedIP}:8080`, {
                method: 'POST',
                body: cmd,
                headers: { 'Content-Type': 'text/plain' }
            });
        }

        function changeVolume(val) {
            sendCommand("volume " + val);
        }

        function loadVideoList() {
            if (!selectedIP) return alert("ูุฑุฌู ุงุฎุชูุงุฑ ุงูุฌูุงุฒ ุฃููุงู");
            fetch(`http://${selectedIP}:8080/videos`)
                .then(res => res.json())
                .then(videos => {
                    const dropdown = document.getElementById("videoSelect");
                    dropdown.innerHTML = "";
                    videos.forEach(video => {
                        const option = document.createElement("option");
                        option.value = video;
                        option.textContent = video;
                        dropdown.appendChild(option);
                    });
                })
                .catch(() => alert("ูู ูุชู ุงูุนุซูุฑ ุนูู ูุงุฆูุฉ ุงูููุฏูููุงุช ูู ุงูุฌูุงุฒ."));
        }
    </script>
</body>
</html>
